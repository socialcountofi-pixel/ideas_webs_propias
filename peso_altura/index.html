<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Comparador Pok√©mon üß¢‚ö°</title>
<link rel="stylesheet" href="style.css" type="text/css">
</head>
<body>

<h1>Comparador de Altura y Peso Pok√©mon üß¢‚ö°</h1>

<div class="container">
  <input type="text" id="pokemonInput" placeholder="Introduce nombre o ID (ej: wailord)">
  <button onclick="buscarPokemon()">Buscar Pok√©mon</button>

  <h2>Altura</h2>
  <div class="comparacion-vertical" id="comparacionAltura">
    <div id="barraAlturaAsh" class="barra barra-ash" style="height:50px;"></div>
    <div class="imagen-con-info">
      <img id="ashAlturaImg" src="https://images.wikidexcdn.net/mwuploads/wikidex/e/eb/latest/20220628064212/Ash_Masters.png" alt="Ash">
      <span id="ashAlturaTexto">1.69 m</span>
    </div>
    <div class="imagen-con-info">
      <img id="pokemonAlturaImg" src="" alt="Pok√©mon">
      <span id="pokemonAlturaTexto"></span>
    </div>
    <div id="barraAlturaPokemon" class="barra barra-pokemon" style="height:50px;"></div>
  </div>

  <h2>Peso</h2>
  <div class="comparacion-vertical" id="comparacionPeso">
    <div id="barraPesoAsh" class="barra barra-ash" style="height:50px;"></div>
    <div class="imagen-con-info">
      <img id="ashPesoImg" src="https://images.wikidexcdn.net/mwuploads/wikidex/e/eb/latest/20220628064212/Ash_Masters.png" alt="Ash">
      <span id="ashPesoTexto">40.0 kg</span>
    </div>
    <div class="imagen-con-info">
      <img id="pokemonPesoImg" src="" alt="Pok√©mon">
      <span id="pokemonPesoTexto"></span>
    </div>
    <div id="barraPesoPokemon" class="barra barra-pokemon" style="height:50px;"></div>
  </div>

  <div class="info" id="info"></div>
</div>

<script>
const alturaAsh = 1.69;
const pesoAsh = 40.0;
const maxBarHeight = 150;

const barraAlturaAsh = document.getElementById("barraAlturaAsh");
const barraAlturaPokemon = document.getElementById("barraAlturaPokemon");
const barraPesoAsh = document.getElementById("barraPesoAsh");
const barraPesoPokemon = document.getElementById("barraPesoPokemon");

const ashAlturaImg = document.getElementById("ashAlturaImg");
const ashPesoImg = document.getElementById("ashPesoImg");
const pokemonAlturaImg = document.getElementById("pokemonAlturaImg");
const pokemonPesoImg = document.getElementById("pokemonPesoImg");

const ashAlturaTexto = document.getElementById("ashAlturaTexto");
const ashPesoTexto = document.getElementById("ashPesoTexto");
const pokemonAlturaTexto = document.getElementById("pokemonAlturaTexto");
const pokemonPesoTexto = document.getElementById("pokemonPesoTexto");

const infoDiv = document.getElementById("info");

async function cargarImagen(url){
  return new Promise(resolve=>{
    const img = new Image();
    img.src = url;
    img.onload = ()=>resolve(url);
    img.onerror = ()=>resolve("https://via.placeholder.com/150?text=No+Image");
  });
}

async function buscarPokemon(){
  const nombre = document.getElementById("pokemonInput").value.toLowerCase().trim();
  if(!nombre) return alert("Introduce nombre o ID de Pok√©mon");
  
  try{
    const res = await fetch(`https://pokeapi.co/api/v2/pokemon/${nombre}`);
    if(!res.ok) throw new Error("Pok√©mon no encontrado");
    const data = await res.json();

    const nombrePokemon = data.name;
    const alturaPokemon = data.height/10;
    const pesoPokemon = data.weight/10;
    const img = data.sprites.other["official-artwork"].front_default || data.sprites.front_default;
    const imgUrl = await cargarImagen(img);

    pokemonAlturaImg.src = imgUrl;
    pokemonPesoImg.src = imgUrl;

    // --- Altura barras ---
    barraAlturaAsh.style.height = `${(alturaAsh/Math.max(alturaAsh,alturaPokemon))*maxBarHeight}px`;
    barraAlturaPokemon.style.height = `${(alturaPokemon/Math.max(alturaAsh,alturaPokemon))*maxBarHeight}px`;

    // --- Peso barras ---
    barraPesoAsh.style.height = `${(pesoAsh/Math.max(pesoAsh,pesoPokemon))*maxBarHeight}px`;
    barraPesoPokemon.style.height = `${(pesoPokemon/Math.max(pesoAsh,pesoPokemon))*maxBarHeight}px`;

    // --- Texto debajo de im√°genes ---
    ashAlturaTexto.textContent = `${alturaAsh.toFixed(2)} m`;
    pokemonAlturaTexto.textContent = `${alturaPokemon.toFixed(2)} m`;

    ashPesoTexto.textContent = `${pesoAsh.toFixed(1)} kg`;
    pokemonPesoTexto.textContent = `${pesoPokemon.toFixed(1)} kg`;

    // --- Info general ---
    infoDiv.innerHTML=`
      <h3>${nombrePokemon.toUpperCase()}</h3>
      <p><strong>ID Pok√©dex:</strong> ${data.id}</p>
      <p><strong>Comparativa de altura:</strong> 
        ${alturaPokemon>alturaAsh?`${nombrePokemon} es m√°s alto que Ash`:
          alturaPokemon<alturaAsh?`Ash es m√°s alto que ${nombrePokemon}`:`Tienen la misma altura`}
      </p>
      <p><strong>Comparativa de peso:</strong> 
        ${pesoPokemon>pesoAsh?`${nombrePokemon} es m√°s pesado que Ash`:
          pesoPokemon<pesoAsh?`Ash es m√°s pesado que ${nombrePokemon}`:`Tienen el mismo peso`}
      </p>
    `;
  }catch(err){
    alert(err.message);
  }
}
</script>

</body>
</html>